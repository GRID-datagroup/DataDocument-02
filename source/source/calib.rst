标定文件
=========

  ``calib``\ 是标定相关文件，主要包括温度-偏压矫正标定文件、温度-偏压矫正标定数据文件、能量-通道关系标定文件和能量-通道关系标定数据文件。

温度-偏压矫正标定文件
-----------------------

  温度-偏压矫正采用公式：:math:`Gain_{det}\approx a_{00}+a_{10}T+a_{01}V_{bias}+a_{11}T\cdot V_{bias}+a_{20}T^2+a_{02}V_{bias}^2`
:math:`+a_{21}T^2\cdot V_{bias}+a_{12}T\cdot V_{bias}^2+a_{22}T^2\cdot V_{bias}^2+a_{30}T^3+a_{31}T^3\cdot V_{bias}+a_{40}T^4`

  \ ``tempbias.json``\ 中记录了4个通道的系数。

温度-偏压矫正标定数据文件
-----------------------------

  数据文件以\ ``csv``\ 格式存储，为实验测得的原始数据。

+-------------------------+-------+------+
|           字段          |  含义 | 说明 |
+=========================+=======+======+
|       temperature       |  温度 |      |
+-------------------------+-------+------+
|           bias          |  偏压 |      |
+-------------------------+-------+------+
|           ADC           | ADC值 |      |
+-------------------------+-------+------+
|    temperature_error    |       |      |
+-------------------------+-------+      |
|        bias_error       |       | 误差 |
+-------------------------+-------+      |
|        ADC_error        |       |      |
+-------------------------+-------+------+

能量-通道关系标定文件
-----------------------

  能量-通道关系（Energy-Channel，简称ec关系）是入射光子能量与输出信号的ADC值的对应关系。分为低、中、高三个能段。

  在低能段和高能段，采用二次函数拟合曲线，\ ``ec_coef.json``\ 文件中记录了对应能段不同通道的曲线系数（:math:`ax^2+bx+c`）。中能段ec关系不构成函数关系，近似模拟时，取高低能段的端点相连获得的曲线作为中能段的响应。

  以下各列之间可任意组合，类型为\ ``value``\ 时值不变，为\ ``error``\ 时值增加后缀\ ``_err``\ ，例如\ ``low.ch1.a``\ 或\ ``high.ch2.c_err``\ ，分别代表低能段通道1的二次项系数a和高能段通道2的常数项误差。

+------+------+----+-------+
| 能段 | 通道 | 值 |  类型 |
+------+------+----+-------+
|      |   0  |  a |       |
|  low +------+----+ value |
|      |   1  |  b |       |
+------+------+----+-------+
|      |   2  |  c |       |
| high +------+----+ error |
|      |   3  |    |       |
+------+------+----+-------+

* low_bound： 中、低能段分界
* high_bound： 中、高能段分界

能量-通道关系标定数据文件
-----------------------------

  数据文件以\ ``csv``\ 格式存储，为实验测得的原始数据。

+-------------------------+-----------+-------------+
|           字段          |    含义   |     说明    |
+=========================+===========+=============+
|          energy         |    能量   |     keV     |
+-------------------------+-----------+-------------+
|          center         | 通道ADC值 |             |
+-------------------------+-----------+ ADC channel |
|        center_err       | ADC值误差 |             |
+-------------------------+-----------+-------------+